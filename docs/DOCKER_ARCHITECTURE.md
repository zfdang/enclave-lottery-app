# ğŸ³ Dockeræ¶æ„è¯¦ç»†è¯´æ˜

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†Enclave Lottery Appåœ¨Dockerç¯å¢ƒä¸­çš„æ¶æ„ç»„æˆã€å¯åŠ¨é¡ºåºã€ç»„ä»¶ä¾èµ–å…³ç³»ä»¥åŠéƒ¨ç½²é…ç½®ã€‚

## ğŸ—ï¸ Dockerç¯å¢ƒæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä¸»æœºç¯å¢ƒ (Host Environment)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   æœ¬åœ°åŒºå—é“¾    â”‚  â”‚    ç”¨æˆ·æµè§ˆå™¨    â”‚  â”‚      å¼€å‘å·¥å…·        â”‚    â”‚
â”‚  â”‚   (Anvil)      â”‚  â”‚   (MetaMask)    â”‚  â”‚   (VS Code, etc)    â”‚    â”‚
â”‚  â”‚   :8545        â”‚  â”‚                 â”‚  â”‚                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                    â”‚                        â”‚             â”‚
â”‚           â”‚                    â”‚                        â”‚             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           â”‚                    â”‚                        â”‚             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Dockerå®¹å™¨ç¯å¢ƒ (Container Environment)           â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚                Enclave Lottery App                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚FastAPIæœåŠ¡å™¨â”‚  â”‚ å½©ç¥¨å¼•æ“      â”‚  â”‚åŒºå—é“¾å®¢æˆ·ç«¯   â”‚  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  :8080      â”‚  â”‚ (Lottery     â”‚  â”‚ (Web3)       â”‚  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚             â”‚  â”‚  Engine)     â”‚  â”‚              â”‚  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           â”‚               â”‚                â”‚          â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚Reactå‰ç«¯åº”ç”¨â”‚  â”‚ æŠ•æ³¨ç®¡ç†å™¨    â”‚  â”‚æ™ºèƒ½åˆçº¦æ¥å£   â”‚  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ (é™æ€æ–‡ä»¶)  â”‚  â”‚ (Bet Mgr)    â”‚  â”‚ (Contract)   â”‚  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                       â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                            â”‚                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                               â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚    ç½‘ç»œè¿æ¥é…ç½®     â”‚
                   â”‚ host.docker.internalâ”‚
                   â”‚ â†’ localhost:8545    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ Dockeré•œåƒæ„æˆ

### åŸºç¡€é•œåƒ: `python:3.11-slim`

```dockerfile
FROM python:3.11-slim
```

**é€‰æ‹©åŸå› :**
- è½»é‡çº§çš„Pythonè¿è¡Œæ—¶ç¯å¢ƒ
- åŒ…å«å¿…éœ€çš„ç³»ç»Ÿåº“å’Œå·¥å…·
- å®‰å…¨æ›´æ–°åŠæ—¶ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ

### ç³»ç»Ÿç»„ä»¶å®‰è£…

```dockerfile
RUN apt-get update && apt-get install -y \
    curl \
    && rm -rf /var/lib/apt/lists/*
```

**å®‰è£…çš„ç³»ç»Ÿç»„ä»¶:**
- `curl`: ç”¨äºå¥åº·æ£€æŸ¥å’ŒAPIè°ƒç”¨
- æ¸…ç†aptç¼“å­˜ä»¥å‡å°é•œåƒä½“ç§¯

### Pythonä¾èµ–å±‚

```dockerfile
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
```

**æ ¸å¿ƒPythonä¾èµ–:**
- `fastapi==0.104.1` - Webæ¡†æ¶
- `uvicorn==0.24.0` - ASGIæœåŠ¡å™¨
- `websockets==12.0` - WebSocketæ”¯æŒ
- `web3>=7.0.0` - ä»¥å¤ªåŠå®¢æˆ·ç«¯
- `eth-account>=0.13.0` - ä»¥å¤ªåŠè´¦æˆ·ç®¡ç†
- `cryptography==41.0.7` - åŠ å¯†åŠŸèƒ½
- `pydantic==2.5.0` - æ•°æ®éªŒè¯
- `aiofiles==23.2.1` - å¼‚æ­¥æ–‡ä»¶æ“ä½œ
- `structlog==23.2.0` - ç»“æ„åŒ–æ—¥å¿—

## ğŸš€ å®¹å™¨å¯åŠ¨é¡ºåº

### 1. é¢„å¯åŠ¨æ£€æŸ¥é˜¶æ®µ

```bash
# å¥åº·æ£€æŸ¥é…ç½®
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:8080/api/health || exit 1
```

**æ£€æŸ¥é¡¹ç›®:**
- å®¹å™¨ç½‘ç»œè¿æ¥çŠ¶æ€
- åŸºç¡€ç³»ç»ŸæœåŠ¡å¯ç”¨æ€§
- Pythonç¯å¢ƒå®Œæ•´æ€§

### 2. åº”ç”¨ç¨‹åºå¯åŠ¨é˜¶æ®µ

```python
# main.py å¯åŠ¨æµç¨‹
async def main():
    logger.info("Initializing Lottery Enclave Application")
    
    # æ­¥éª¤1: åˆå§‹åŒ–åŒºå—é“¾å®¢æˆ·ç«¯
    blockchain_client = BlockchainClient()
    await blockchain_client.initialize()
    
    # æ­¥éª¤2: åˆå§‹åŒ–å½©ç¥¨å¼•æ“
    lottery_engine = LotteryEngine(blockchain_client)
    
    # æ­¥éª¤3: å¯åŠ¨WebæœåŠ¡å™¨
    web_server = WebServer(lottery_engine)
    await web_server.start()
```

### 3. è¯¦ç»†å¯åŠ¨æ—¶åº

```mermaid
sequenceDiagram
    participant Container as å®¹å™¨å¯åŠ¨
    participant Main as main.py
    participant Blockchain as åŒºå—é“¾å®¢æˆ·ç«¯
    participant Lottery as å½©ç¥¨å¼•æ“
    participant WebServer as WebæœåŠ¡å™¨
    participant HealthCheck as å¥åº·æ£€æŸ¥

    Container->>Main: 1. å¯åŠ¨ä¸»è¿›ç¨‹
    Main->>Blockchain: 2. åˆå§‹åŒ–åŒºå—é“¾è¿æ¥
    Blockchain->>Blockchain: 3. è¿æ¥åˆ°host.docker.internal:8545
    Blockchain->>Main: 4. è¿æ¥çŠ¶æ€åé¦ˆ
    Main->>Lottery: 5. åˆå§‹åŒ–å½©ç¥¨å¼•æ“
    Lottery->>Lottery: 6. åŠ è½½é…ç½®å’ŒçŠ¶æ€
    Main->>WebServer: 7. å¯åŠ¨WebæœåŠ¡å™¨
    WebServer->>WebServer: 8. ç»‘å®šç«¯å£8080
    WebServer->>HealthCheck: 9. æ¿€æ´»å¥åº·æ£€æŸ¥ç«¯ç‚¹
    HealthCheck->>Container: 10. å®¹å™¨å°±ç»ªä¿¡å·
```

## ğŸ”§ ç»„ä»¶è¯¦ç»†è¯´æ˜

### 1. FastAPI WebæœåŠ¡å™¨

**æ–‡ä»¶ä½ç½®:** `src/web_server.py`

**åŠŸèƒ½:**
- æä¾›REST APIæ¥å£
- å¤„ç†WebSocketè¿æ¥
- æœåŠ¡é™æ€å‰ç«¯æ–‡ä»¶
- ç”¨æˆ·è®¤è¯å’Œä¼šè¯ç®¡ç†

**ç«¯å£é…ç½®:**
- å®¹å™¨å†…éƒ¨ç«¯å£: `8080`
- ä¸»æœºæ˜ å°„ç«¯å£: `8081` (Docker Demoæ¨¡å¼)

**ä¸»è¦ç«¯ç‚¹:**
```python
# å¥åº·æ£€æŸ¥
GET /api/health

# å½©ç¥¨çŠ¶æ€
GET /api/status
GET /api/draw/current
GET /api/draw/history

# æŠ•æ³¨æ“ä½œ
POST /api/bet
GET /api/user/{address}/bets

# WebSocket
WS /ws
```

### 2. å½©ç¥¨å¼•æ“ (Lottery Engine)

**æ–‡ä»¶ä½ç½®:** `src/lottery/engine.py`

**æ ¸å¿ƒåŠŸèƒ½:**
- ç®¡ç†å½©ç¥¨è½®æ¬¡ç”Ÿå‘½å‘¨æœŸ
- å¤„ç†ç”¨æˆ·æŠ•æ³¨è¯·æ±‚
- æ‰§è¡Œéšæœºæ•°ç”Ÿæˆå’Œå¼€å¥–
- ç»´æŠ¤æŠ•æ³¨å†å²å’Œç»Ÿè®¡

**å…³é”®ç»„ä»¶:**
```python
class LotteryEngine:
    def __init__(self):
        self.bet_manager = BetManager()      # æŠ•æ³¨ç®¡ç†
        self.scheduler = DrawScheduler()     # å¼€å¥–è°ƒåº¦
        self.rng = SecureRandomGenerator()   # éšæœºæ•°ç”Ÿæˆå™¨
```

**çŠ¶æ€ç®¡ç†:**
- `betting` - æŠ•æ³¨é˜¶æ®µ
- `drawing` - å¼€å¥–è¿›è¡Œä¸­
- `completed` - è½®æ¬¡å®Œæˆ

### 3. åŒºå—é“¾å®¢æˆ·ç«¯

**æ–‡ä»¶ä½ç½®:** `src/blockchain/client.py`

**èŒè´£:**
- ä¸ä»¥å¤ªåŠç½‘ç»œé€šä¿¡
- æ™ºèƒ½åˆçº¦äº¤äº’
- äº¤æ˜“ç­¾åå’Œå‘é€
- äº‹ä»¶ç›‘å¬å’Œå¤„ç†

**ç½‘ç»œé…ç½®:**
```python
# å®¹å™¨ç¯å¢ƒé…ç½®
ETHEREUM_RPC_URL = "http://host.docker.internal:8545"
CONTRACT_ADDRESS = "0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"
```

**è¿æ¥æµç¨‹:**
1. è¯»å–ç¯å¢ƒå˜é‡é…ç½®
2. åˆå§‹åŒ–Web3è¿æ¥
3. éªŒè¯ç½‘ç»œè¿æ¥æ€§
4. åŠ è½½æ™ºèƒ½åˆçº¦ABI
5. å»ºç«‹äº‹ä»¶ç›‘å¬å™¨

### 4. Reactå‰ç«¯åº”ç”¨

**æ–‡ä»¶ä½ç½®:** `src/frontend/`

**æ„å»ºäº§ç‰©:**
- ç¼–è¯‘åçš„é™æ€æ–‡ä»¶ä½äº `dist/` ç›®å½•
- ç”±FastAPIé™æ€æ–‡ä»¶æœåŠ¡å™¨æä¾›

**ä¸»è¦ç»„ä»¶:**
- `App.tsx` - ä¸»åº”ç”¨ç»„ä»¶
- `BettingPanel.tsx` - æŠ•æ³¨ç•Œé¢
- `LotteryTimer.tsx` - å€’è®¡æ—¶æ˜¾ç¤º
- `ActivityFeed.tsx` - æ´»åŠ¨æµ
- `WalletConnection.tsx` - é’±åŒ…è¿æ¥

## ğŸŒ ç½‘ç»œé…ç½®

### å®¹å™¨ç½‘ç»œè®¾ç½®

```bash
# Dockerè¿è¡Œå‘½ä»¤
docker run -d \
  --name enclave-demo \
  -p 8081:8080 \
  --add-host host.docker.internal:host-gateway \
  -e ETHEREUM_RPC_URL=http://host.docker.internal:8545 \
  -e CONTRACT_ADDRESS=0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 \
  enclave-lottery-app:latest
```

**ç½‘ç»œé…ç½®è¯´æ˜:**

1. **ç«¯å£æ˜ å°„:** `-p 8081:8080`
   - ä¸»æœºç«¯å£8081æ˜ å°„åˆ°å®¹å™¨ç«¯å£8080
   - å¤–éƒ¨è®¿é—®: `http://localhost:8081`

2. **ä¸»æœºç½‘ç»œè®¿é—®:** `--add-host host.docker.internal:host-gateway`
   - å…è®¸å®¹å™¨è®¿é—®ä¸»æœºç½‘ç»œ
   - åŒºå—é“¾è¿æ¥: `host.docker.internal:8545`

3. **ç¯å¢ƒå˜é‡æ³¨å…¥:**
   - `ETHEREUM_RPC_URL` - åŒºå—é“¾èŠ‚ç‚¹åœ°å€
   - `CONTRACT_ADDRESS` - æ™ºèƒ½åˆçº¦åœ°å€

### ç½‘ç»œé€šä¿¡æµç¨‹

```
ç”¨æˆ·æµè§ˆå™¨ (localhost:8081)
    â†“ HTTP/WebSocket
Dockerå®¹å™¨ (enclave-lottery-app:8080)
    â†“ HTTP RPC
ä¸»æœºåŒºå—é“¾èŠ‚ç‚¹ (host.docker.internal:8545)
    â†“ JSON-RPC
ä»¥å¤ªåŠç½‘ç»œ/æœ¬åœ°AnvilèŠ‚ç‚¹
```

## ğŸ“Š å®¹å™¨èµ„æºé…ç½®

### é»˜è®¤èµ„æºåˆ†é…

```dockerfile
# å®¹å™¨ç”¨æˆ·è®¾ç½®
RUN groupadd -r lottery && useradd -r -g lottery lottery
USER lottery
```

**å®‰å…¨é…ç½®:**
- érootç”¨æˆ·è¿è¡Œ (`lottery`)
- æœ€å°æƒé™åŸåˆ™
- æ–‡ä»¶ç³»ç»Ÿåªè¯»ä¿æŠ¤

### æ€§èƒ½ä¼˜åŒ–

```python
# uvicornæœåŠ¡å™¨é…ç½®
uvicorn.run(
    app,
    host="0.0.0.0",
    port=8080,
    workers=1,           # å•workeræ¨¡å¼
    access_log=False,    # æ€§èƒ½ä¼˜åŒ–
    log_level="info"
)
```

**èµ„æºä½¿ç”¨:**
- CPU: å•æ ¸å¿ƒä½¿ç”¨
- å†…å­˜: ~200-300MBè¿è¡Œæ—¶
- å­˜å‚¨: ~563MBé•œåƒå¤§å°
- ç½‘ç»œ: ä½å»¶è¿Ÿè¦æ±‚

## ğŸ” ç›‘æ§å’Œè¯Šæ–­

### å¥åº·æ£€æŸ¥æœºåˆ¶

```bash
# å®¹å™¨å¥åº·çŠ¶æ€æ£€æŸ¥
curl -f http://localhost:8080/api/health

# è¿”å›æ ¼å¼
{
  "status": "healthy",
  "timestamp": "2025-09-20T13:51:36Z",
  "components": {
    "web_server": "ok",
    "blockchain_client": "connected",
    "lottery_engine": "active"
  }
}
```

### æ—¥å¿—è¾“å‡º

```python
# ç»“æ„åŒ–æ—¥å¿—é…ç½®
import structlog

logger = structlog.get_logger()
logger.info("Application starting", component="main")
logger.error("Blockchain connection failed", error=str(e))
```

**æ—¥å¿—çº§åˆ«:**
- `DEBUG` - è¯¦ç»†è°ƒè¯•ä¿¡æ¯
- `INFO` - ä¸€èˆ¬æ“ä½œä¿¡æ¯
- `WARNING` - è­¦å‘Šä¿¡æ¯
- `ERROR` - é”™è¯¯ä¿¡æ¯

### å®¹å™¨è¯Šæ–­å‘½ä»¤

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps | grep enclave-lottery-app

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs enclave-demo

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it enclave-demo /bin/bash

# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
docker stats enclave-demo
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

#### 1. åŒºå—é“¾è¿æ¥å¤±è´¥

**ç—‡çŠ¶:**
```
ERROR - Failed to connect to blockchain network
```

**è§£å†³æ–¹æ¡ˆ:**
1. ç¡®è®¤AnvilèŠ‚ç‚¹æ­£åœ¨è¿è¡Œ: `netstat -an | grep 8545`
2. æ£€æŸ¥å®¹å™¨ç½‘ç»œé…ç½®: `--add-host host.docker.internal:host-gateway`
3. éªŒè¯ç¯å¢ƒå˜é‡: `ETHEREUM_RPC_URL=http://host.docker.internal:8545`

#### 2. ç«¯å£å†²çª

**ç—‡çŠ¶:**
```
Error starting userland proxy: listen tcp4 0.0.0.0:8081: bind: address already in use
```

**è§£å†³æ–¹æ¡ˆ:**
1. æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹: `lsof -i :8081`
2. åœæ­¢å†²çªçš„æœåŠ¡æˆ–ä½¿ç”¨å…¶ä»–ç«¯å£
3. ä¿®æ”¹ç«¯å£æ˜ å°„: `-p 8082:8080`

#### 3. å®¹å™¨å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶:**
```
Container exits immediately with code 1
```

**è§£å†³æ–¹æ¡ˆ:**
1. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—: `docker logs container_name`
2. æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
3. éªŒè¯é•œåƒå®Œæ•´æ€§: `docker images enclave-lottery-app`

## ğŸ“ˆ æ€§èƒ½åŸºå‡†æµ‹è¯•

### å¯åŠ¨æ—¶é—´

- **å†·å¯åŠ¨:** ~3-5ç§’
- **çƒ­å¯åŠ¨:** ~1-2ç§’
- **å¥åº·æ£€æŸ¥:** ~500ms

### å¹¶å‘æ€§èƒ½

- **APIè¯·æ±‚:** 1000+ req/sec
- **WebSocketè¿æ¥:** 100+ å¹¶å‘
- **åŒºå—é“¾äº¤äº’:** 10-50 tx/sec

### èµ„æºå ç”¨

- **å†…å­˜ä½¿ç”¨:** 150-300MB
- **CPUä½¿ç”¨:** 5-15% (å•æ ¸)
- **ç£ç›˜I/O:** æœ€å°åŒ–
- **ç½‘ç»œå¸¦å®½:** <1Mbps

## ğŸ”’ å®‰å…¨è€ƒè™‘

### å®¹å™¨å®‰å…¨

1. **ç”¨æˆ·æƒé™:** érootç”¨æˆ·è¿è¡Œ
2. **ç½‘ç»œéš”ç¦»:** æœ€å°åŒ–ç½‘ç»œæš´éœ²
3. **æ–‡ä»¶ç³»ç»Ÿ:** åªè¯»æ–‡ä»¶ç³»ç»Ÿä¿æŠ¤
4. **ç¯å¢ƒå˜é‡:** æ•æ„Ÿä¿¡æ¯å¤–éƒ¨æ³¨å…¥

### åº”ç”¨å®‰å…¨

1. **è¾“å…¥éªŒè¯:** æ‰€æœ‰APIè¾“å…¥ä¸¥æ ¼éªŒè¯
2. **åŠ å¯†é€šä¿¡:** HTTPS/WSS (ç”Ÿäº§ç¯å¢ƒ)
3. **è®¿é—®æ§åˆ¶:** åŸºäºé’±åŒ…åœ°å€çš„è®¤è¯
4. **æ—¥å¿—å®‰å…¨:** æ•æ„Ÿä¿¡æ¯è„±æ•

---

**ğŸ“ æ–‡æ¡£ç»´æŠ¤è¯´æ˜:**
- æœ¬æ–‡æ¡£éšä»£ç æ›´æ–°åŒæ­¥ç»´æŠ¤
- å¦‚æœ‰ç–‘é—®è¯·å‚è€ƒ `DEMO_GUIDE.md` æˆ–æäº¤Issue
- æœ€åæ›´æ–°: 2025å¹´9æœˆ20æ—¥